<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Codex Chronicle - Intelligent Novel Planning</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Source+Serif+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --parchment: #f8f3e6;
            --ink: #2c1810;
            --gold: #d4af37;
            --sienna: #8b4513;
            --slate: #2f4f4f;
            --crimson: #9d0000;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Source Serif Pro', serif;
            background-color: var(--parchment);
            color: var(--ink);
            line-height: 1.8;
            background-image: radial-gradient(circle at 15% 50%, rgba(212, 175, 55, 0.05) 0%, transparent 20%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .header {
            padding: 40px 0;
            text-align: center;
            border-bottom: 2px solid var(--gold);
            margin-bottom: 50px;
        }
        
        .logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3.5rem;
            color: var(--sienna);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        .logo-icon { font-size: 3rem; color: var(--gold); }
        
        .tagline {
            font-size: 1.3rem;
            color: var(--slate);
            font-style: italic;
            margin-bottom: 20px;
        }
        
        .section {
            margin: 80px 0;
            padding: 40px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(139, 69, 19, 0.1);
        }
        
        .section-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5rem;
            color: var(--sienna);
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--gold);
            text-align: center;
        }
        
        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }
        
        .widget-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(139, 69, 19, 0.2);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .widget-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .widget-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--gold), var(--crimson));
        }
        
        .widget-icon {
            font-size: 3rem;
            color: var(--gold);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .widget-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            color: var(--sienna);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .widget-features {
            list-style: none;
            padding: 0;
        }
        
        .widget-features li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(139, 69, 19, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .demo-interface {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin: 50px 0;
            border: 1px solid rgba(139, 69, 19, 0.2);
        }
        
        .demo-header {
            background: linear-gradient(135deg, var(--sienna), var(--slate));
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .demo-body {
            padding: 30px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .message {
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .message:hover {
            transform: scale(1.02);
        }
        
        .message.ai {
            background: rgba(212, 175, 55, 0.1);
            align-self: flex-start;
            border-left: 3px solid var(--gold);
        }
        
        .message.user {
            background: rgba(47, 79, 79, 0.1);
            align-self: flex-end;
            border-right: 3px solid var(--slate);
        }
        
        .cta-section {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, rgba(139, 69, 19, 0.05), rgba(47, 79, 79, 0.05));
            border-radius: 15px;
            margin: 80px 0;
            border: 2px dashed var(--gold);
        }
        
        .cta-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.8rem;
            color: var(--sienna);
            margin-bottom: 20px;
        }
        
        .cta-button {
            display: inline-block;
            padding: 18px 45px;
            background: linear-gradient(135deg, var(--gold), var(--sienna));
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-weight: 600;
            margin-top: 30px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(139, 69, 19, 0.3);
        }
        
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.4);
            background: linear-gradient(135deg, var(--sienna), var(--crimson));
        }
        
        .footer {
            text-align: center;
            padding: 40px 0;
            margin-top: 80px;
            border-top: 1px solid rgba(139, 69, 19, 0.2);
            color: var(--slate);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--slate);
        }
        
        .partyrock-btn {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(135deg, #FF9900, #FF6600);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 600;
            margin: 15px 0;
            transition: transform 0.3s ease;
        }
        
        .partyrock-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 102, 0, 0.3);
        }
        
        /* ===== POPUP MODAL STYLES ===== */
        .fullscreen-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--sienna), var(--slate));
            color: white;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .modal-header h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .close-fullscreen {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 2rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .close-fullscreen:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .fullscreen-iframe {
            flex: 1;
            width: 100%;
            border: none;
            background: white;
        }
        
        .modal-controls {
            padding: 15px 25px;
            background: var(--parchment);
            border-top: 1px solid rgba(139, 69, 19, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: var(--slate);
        }
        
        .modal-controls a {
            color: var(--crimson);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .modal-controls a:hover {
            text-decoration: underline;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .iframe-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: var(--slate);
        }
        
        .iframe-loading i {
            font-size: 3rem;
            color: var(--gold);
            margin-bottom: 20px;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.6; transform: scale(0.95); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.6; transform: scale(0.95); }
        }
        
        body.modal-open {
            overflow: hidden;
        }
        
        @media (max-width: 768px) {
            .widgets-grid { grid-template-columns: 1fr; }
            .logo { font-size: 2.5rem; flex-direction: column; gap: 10px; }
            .section { padding: 25px; }
            .section-title { font-size: 2rem; }
            .modal-controls { flex-direction: column; gap: 10px; text-align: center; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-scroll logo-icon"></i>
                The Codex Chronicle
                <i class="fas fa-feather-alt logo-icon"></i>
            </div>
            <p class="tagline">Where your story finds its immortal form</p>
            <p style="color: var(--slate); max-width: 800px; margin: 0 auto;">
                An intelligent novel planner that remembers everything. Just talk about your story, 
                and watch it transform into a beautifully organized manuscript.
            </p>
        </div>
    </header>

    <div class="container">
        <section class="section">
            <h2 class="section-title">The Simple, Powerful Way to Plan Your Novel</h2>
            <p style="text-align: center; font-size: 1.2rem; color: var(--slate); max-width: 900px; margin: 0 auto 40px;">
                Forget complex planners with endless widgets. The Codex Chronicle uses three intelligent tools 
                that work together seamlessly, remembering your entire story as you build it.
            </p>
            
            <div class="widgets-grid">
                <div class="widget-card" onclick="openWidget('chronicle')">
                    <div class="widget-icon"><i class="fas fa-comments"></i></div>
                    <h3 class="widget-title">The Chronicle Conversation</h3>
                    <p style="text-align: center; color: var(--slate); margin-bottom: 20px;">
                        Just talk about your story naturally. The AI remembers every detail.
                    </p>
                    <ul class="widget-features">
                        <li><i class="fas fa-check"></i> Remembers characters, plot, settings</li>
                        <li><i class="fas fa-check"></i> Suggests connected plot twists</li>
                        <li><i class="fas fa-check"></i> No repeating yourself</li>
                    </ul>
                </div>
                
                <div class="widget-card" onclick="openWidget('illumination')">
                    <div class="widget-icon"><i class="fas fa-palette"></i></div>
                    <h3 class="widget-title">The Illumination Studio</h3>
                    <p style="text-align: center; color: var(--slate); margin-bottom: 20px;">
                        Generate beautiful images that match your story perfectly.
                    </p>
                    <ul class="widget-features">
                        <li><i class="fas fa-check"></i> One-click character portraits</li>
                        <li><i class="fas fa-check"></i> Scene images from your descriptions</li>
                        <li><i class="fas fa-check"></i> Consistent artistic style</li>
                    </ul>
                </div>
                
                <div class="widget-card" onclick="openWidget('codex')">
                    <div class="widget-icon"><i class="fas fa-book"></i></div>
                    <h3 class="widget-title">The Final Codex</h3>
                    <p style="text-align: center; color: var(--slate); margin-bottom: 20px;">
                        Auto-generates a beautiful PDF manuscript from your conversation.
                    </p>
                    <ul class="widget-features">
                        <li><i class="fas fa-check"></i> Auto-compiles everything</li>
                        <li><i class="fas fa-check"></i> Professional PDF formatting</li>
                        <li><i class="fas fa-check"></i> Includes all generated images</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">See It In Action</h2>
            <div class="demo-interface">
                <div class="demo-header"><i class="fas fa-comment-alt"></i> The Chronicle Conversation</div>
                <div class="demo-body" id="conversationDemo">
                    <div class="message ai" onclick="showMessage('ai')">
                        <div style="font-weight: 600; margin-bottom: 5px; color: var(--sienna);">Codex AI:</div>
                        <div>Welcome! Tell me about your story - characters, plot ideas, anything. I'll remember everything.</div>
                    </div>
                    <div class="message user" onclick="showMessage('user')">
                        <div style="font-weight: 600; margin-bottom: 5px; color: var(--sienna);">You:</div>
                        <div>My protagonist is Elara, a librarian who discovers a book that glows at midnight.</div>
                    </div>
                    <div class="message ai" onclick="showMessage('ai')">
                        <div style="font-weight: 600; margin-bottom: 5px; color: var(--sienna);">Codex AI:</div>
                        <div>Elara the librarian + mysterious glowing book. What happens when she opens it?</div>
                    </div>
                    <div class="message user" onclick="showMessage('user')">
                        <div style="font-weight: 600; margin-bottom: 5px; color: var(--sienna);">You:</div>
                        <div>Plot twist: The book contains her grandfather's lost research about magical libraries.</div>
                    </div>
                    <div class="message ai" onclick="showMessage('ai')">
                        <div style="font-weight: 600; margin-bottom: 5px; color: var(--sienna);">Codex AI:</div>
                        <div>Great twist! So Elara's discovery connects to family history. This could explain why the book chose her.</div>
                    </div>
                </div>
                
                <!-- Interactive Input -->
                <div style="padding: 20px; border-top: 1px solid rgba(139, 69, 19, 0.2);">
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="userInput" placeholder="Type your story idea here..." 
                               style="flex: 1; padding: 12px; border: 1px solid var(--sienna); border-radius: 5px; font-family: 'Source Serif Pro', serif;">
                        <button onclick="addUserMessage()" 
                                style="padding: 12px 25px; background: var(--sienna); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">
                            Send
                        </button>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: var(--slate); text-align: center;">
                        Try it out! This demo simulates how the AI responds to your story ideas.
                    </p>
                </div>
            </div>
        </section>

        <section class="cta-section">
            <h2 class="cta-title">Begin Your Chronicle</h2>
            <p style="font-size: 1.2rem; color: var(--slate); max-width: 700px; margin: 0 auto 30px;">
                Join writers who have turned conversation into completed manuscripts. 
                No learning curve, no complex tools - just your story, beautifully realized.
            </p>
            <button class="cta-button" onclick="launchApp()">
                <i class="fas fa-play-circle"></i> Launch The Codex Chronicle
            </button>
            <div style="margin-top: 20px;">
                <a href="https://partyrock.aws/u/KJAM924/Ww_YxGSzC/The-Scriptorium%253A-Narrative-Forge" 
                   target="_blank" class="partyrock-btn">
                    <i class="fas fa-external-link-alt"></i> Open in New Tab
                </a>
            </div>
            <p style="margin-top: 20px; color: var(--slate); font-size: 0.9rem;">
                Free forever • No account required • Works on all devices
            </p>
        </section>
    </div>

    <footer class="footer">
        <div class="container">
            <div style="font-family: 'Cormorant Garamond', serif; font-size: 2rem; margin-bottom: 20px; color: var(--sienna);">
                <i class="fas fa-scroll"></i> The Codex Chronicle
            </div>
            <p>Connected to: <a href="https://partyrock.aws/u/KJAM924/Ww_YxGSzC/The-Scriptorium%253A-Narrative-Forge" 
                               target="_blank" style="color: var(--crimson);">The Scriptorium: Narrative Forge</a></p>
            <p>&copy; 2024 The Codex Chronicle. Every story deserves its proper chronicle.</p>
        </div>
    </footer>

    <!-- Modal for Widget Info -->
    <div class="modal" id="widgetModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <h3 id="modalTitle" style="color: var(--sienna); margin-bottom: 20px;"></h3>
            <p id="modalDescription" style="margin-bottom: 20px;"></p>
            <a href="https://partyrock.aws/u/KJAM924/Ww_YxGSzC/The-Scriptorium%253A-Narrative-Forge" 
               target="_blank" class="partyrock-btn">
                <i class="fas fa-external-link-alt"></i> Open This Tool in PartyRock
            </a>
        </div>
    </div>

    <script>
        // Your actual PartyRock URL
        const PARTYROCK_URL = 'https://partyrock.aws/u/KJAM924/Ww_YxGSzC/The-Scriptorium%253A-Narrative-Forge';
        
        // Launch the app in a fullscreen modal (POPUP VERSION)
        function launchApp() {
            // Create the modal HTML
            const modalHTML = `
                <div class="fullscreen-modal" id="partyrockModal">
                    <div class="modal-header">
                        <h3><i class="fas fa-scroll"></i> The Codex Chronicle AI App</h3>
                        <button class="close-fullscreen" onclick="closeFullscreen()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="iframe-loading" id="loadingIndicator">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading your AI writing assistant...</p>
                    </div>
                    
                    <iframe 
                        src="${PARTYROCK_URL}" 
                        class="fullscreen-iframe"
                        allow="clipboard-write"
                        title="The Codex Chronicle AI App"
                        id="partyrockIframe"
                        onload="hideLoading()">
                    </iframe>
                    
                    <div class="modal-controls">
                        <div>
                            <i class="fas fa-info-circle"></i> 
                            This AI app runs directly in your browser
                        </div>
                        <a href="${PARTYROCK_URL}" target="_blank">
                            <i class="fas fa-external-link-alt"></i> Open in new tab
                        </a>
                    </div>
                </div>
            `;
            
            // Add modal to page
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Prevent body scrolling
            document.body.classList.add('modal-open');
            
            // Close modal with Escape key
            document.addEventListener('keydown', function closeOnEscape(e) {
                if (e.key === 'Escape') closeFullscreen();
            });
        }
        
        // Hide loading indicator when iframe loads
        function hideLoading() {
            const loading = document.getElementById('loadingIndicator');
            if (loading) loading.style.display = 'none';
        }
        
        // Close the fullscreen modal
        function closeFullscreen() {
            const modal = document.getElementById('partyrockModal');
            if (modal) {
                modal.remove();
                document.body.classList.remove('modal-open');
            }
        }
        
        // Open specific widget info
        function openWidget(widgetType) {
            const modal = document.getElementById('widgetModal');
            const title = document.getElementById('modalTitle');
            const description = document.getElementById('modalDescription');
            
            const widgets = {
                'chronicle': {
                    title: 'The Chronicle Conversation',
                    desc: 'This is your main AI conversation tool. It remembers every detail of your story, suggests plot connections, and helps develop your narrative organically.'
                },
                'illumination': {
                    title: 'The Illumination Studio',
                    desc: 'Generate character portraits, scene images, and book covers that match your story perfectly. All images maintain a consistent artistic style.'
                },
                'codex': {
                    title: 'The Final Codex',
                    desc: 'Automatically compiles your entire story into a professionally formatted PDF manuscript, complete with all generated images and organized chapters.'
                }
            };
            
            title.textContent = widgets[widgetType].title;
            description.textContent = widgets[widgetType].desc;
            modal.style.display = 'flex';
        }
        
        // Close modal
        function closeModal() {
            document.getElementById('widgetModal').style.display = 'none';
        }
        
        // Show message info
        function showMessage(type) {
            const messages = {
                'ai': 'This is how the AI responds to your story ideas, remembering previous details and suggesting connections.',
                'user': 'Your input - just talk naturally about your story. The AI will remember everything you say.'
            };
            alert(messages[type]);
        }
        
        // Interactive demo conversation
        function addUserMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 5px; color: var(--sienna);">You:</div>
                <div>${message}</div>
            `;
            userMsg.onclick = () => showMessage('user');
            
            document.getElementById('conversationDemo').appendChild(userMsg);
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const responses = [
                    "Fascinating! I've added that to your story archive. What happens next?",
                    "Great detail! How does this revelation affect your protagonist?",
                    "Interesting development! What conflict arises from this situation?",
                    "Perfect! This connects beautifully with your earlier idea about...",
                    "Noted! I've updated your character profiles with this information.",
                    "Intriguing! Let me suggest a possible plot twist based on this..."
                ];
                
                const aiMsg = document.createElement('div');
                aiMsg.className = 'message ai';
                aiMsg.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 5px; color: var(--sienna);">Codex AI:</div>
                    <div>${responses[Math.floor(Math.random() * responses.length)]}</div>
                `;
                aiMsg.onclick = () => showMessage('ai');
                
                document.getElementById('conversationDemo').appendChild(aiMsg);
                
                // Auto-scroll to bottom
                document.getElementById('conversationDemo').scrollTop = 
                    document.getElementById('conversationDemo').scrollHeight;
            }, 1000);
        }
        
        // Interactive features on load
        document.addEventListener('DOMContentLoaded', function() {
            // Make Enter key work in input
            document.getElementById('userInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addUserMessage();
            });
            
            // Close modal on background click
            document.getElementById('widgetModal').addEventListener('click', function(e) {
                if (e.target === this) closeModal();
            });
            
            // Close fullscreen modal on background click
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('fullscreen-modal')) {
                    closeFullscreen();
                }
            });
        });
    </script>
</body>
</html>
